# Railway Configuration for MedusaJS Server
# This service handles HTTP requests (API + Admin)

[build]
builder = "NIXPACKS"
# Clean build directory before building to avoid corrupted cache
buildCommand = "rm -rf .medusa/server && yarn build:production"

[deploy]
# Server mode - handles HTTP traffic
startCommand = "yarn start:production"
healthcheckPath = "/health"
healthcheckTimeout = 300

# Server-specific settings
[deploy.environmentVariables]
WORKER_MODE = "false"
NODE_ENV = "production"
